{% extends 'base.html' %}
{% load static %}

{% block title %}
    Профиль
{% endblock title %}

{% block links %}
    <link type="text/css" href="{% static 'users/css/profile.css' %}" rel="stylesheet">
{% endblock links %}

{% block content %}
    <div class="container">

        <div class="title title-center">
            <h2> Профиль </h2>
        </div>

        {% if form.non_field_errors %}
            <div class="alert alert-info alert-dismissible fade show" role="alert">
                {{ form.non_field_errors }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        {% endif %}

        <form class="profile-form" method="post" enctype="multipart/form-data" id="profile-form">

            <div class="current-profile-img">
                {% if user.profile_img %}
                    <img id="profile-img" src="{{ user.profile_img.url }}" alt="profile-img">
                {% else %}
                    <img id="profile-img" src="{% static 'main/images/default_profile_img.png' %}" alt="default-profile-img">
                {% endif %}

            </div>

            <div class="other-fields">
                {% csrf_token %}
                {% for field in form %}

                    <div class="one-field">
                        {{ field.label }}:
                        {{ field }}
                        {# If field contains errors #}
                         {% if field.errors %}
                        <div class="alert alert-warning alert-dismissible fade show" role="alert">
                            {{ field.errors }}
                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>
                    {% endif %}
                    </div>

                {% endfor %}

            </div>

        </form>
        <button id="send" type='submit' form="profile-form" class="send-form-btn btn-center"> Сохранить</button>
    </div>
{% endblock content %}